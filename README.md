# Cartesian Tree

[![CMake](https://github.com/Algorithms-and-Data-Structures-2021/semester-work-template/actions/workflows/cmake.yml/badge.svg)](https://github.com/Algorithms-and-Data-Structures-2021/semester-work-template/actions/workflows/cmake.yml)

**_Измените status badge сверху для отображения статуса сборки вашего проекта._**

`Actions > CMake > ... > Create status badge`

[Наша папка на гугл диске](https://drive.google.com/drive/folders/1A01XumxrWELLVbNP_Sq-Tcs-M1O4V5Ne)
 
_Краткое описание семестрового проекта. Следует отразить информацию по следующим пунктам:_

- _Какая структура данных реализуется?_
 ***Структура данных - Cartesian Tree (Декартово дерево).***

- _Что она из себя представляет (сбалансированное дерево, линейный список и пр.)?_
 ***Это структура данных, объединяющая в себе бинарное дерево поиска и бинарную кучу (отсюда и второе её название: treap (tree + heap) и дерамида (дерево + пирамида), также существует название курево (куча + дерево).***

- _Где и как она используется (приложения)?_
***В приложение AlgoLab добавлена сегодняшняя сортировка декартовым деревом.***

- _Какие операции над ней можно выполнять (поиск, удаление, добавление, вставка и пр.)?_
 ***Вставка, поиск, разбиение на 2 дерева, слияние 2-ух деревьев, удаление и возврат вершины.***

- _Какова теоретическая сложность операций (поиск за `O(log(n))`, вставка за `O(n^2)` и т.д.)?_
  ***Вставка -  `O(log(n))`, Поиск -  `O(log(n))`, Удаление и возврат вершины -  `O(log(n))`, Слияние и Разбиение двух деревьев - `O(Mlog(N/M))`.***

- _Какая-то другая справочная информация о проекте._
***https://ru.wikipedia.org/wiki/Декартово_дерево***

## Команда "В цирке не выступаем"

_Заполните таблицу с указанием вклада каждого из участников в проект._

**Примечание**. Преподаватель может определить вклад любого из участников команды по истории коммитов.

| Фамилия Имя        | Вклад (%) | Прозвище              |
| :---               |   ---:    |  ---:                 |
| Гиниятов Марат     | 40        |  Бүре                 |
| Зиянгиров Руслан   | 30        |  Волк                 |
| Гатин Рамиль       | 30        |  Wolf                 |

**Девиз команды**
> _Каждый думает, что знает меня, но не каждый знает, что не знает, кто думает.........._

## Структура проекта

_Описание основных частей семестрового проекта._

**Пример**. Проект состоит из следующих частей:

- [`src`](src)/[`include`](include) - реализация структуры данных (исходный код и заголовочные файлы);
- [`benchmark`](benchmark) - контрольные тесты производительности структуры данных ;
- [`dataset`](dataset) - наборы данных для запуска контрольных тестов и их генерация;

## Требования (Prerequisites)

_В этом разделе задаются основые требования к программному и аппаратному обеспечению для успешной работы с проектом._

**Пример**. Рекомендуемые требования:

1. С++ компилятор c поддержкой стандарта C++17 (например, _GNU GCC 8.1.x_ и выше).
2. Система автоматизации сборки _CMake_ (версия _3.12.x_ и выше).
3. Интерпретатор _Python_ (версия _3.7.x_ и выше).
4. Рекомендуемый объем оперативной памяти - не менее 4 ГБ.
5. Свободное дисковое пространство объемом ~ 3 ГБ (набор данных для контрольных тестов).
6. Наличие виртуальная машина Java(JVM), Для запуска генератора наборов данных для тестов.

## Сборка и запуск

_Инструкция по сборке проекта, генерации тестовых данных, запуска контрольных тестов и примеров работы._

_Постарайтесь написать инструкцию так, чтобы незнакомый с проектом человек смог самостоятельно всё запустить._

### Пример (Windows)

#### Сборка проекта

_Опишите процесс сборки проекта._

Склонируйте проект к себе на устройство через [Git for Windows](https://gitforwindows.org/) (либо используйте
возможности IDE):

```shell
git clone https://github.com/Algorithms-and-Data-Structures-2021/semester-work-cartesian-tree.git
```

Для ручной сборки проекта в терминале введите:

```shell
# переход в папку с проектом
cd C:\Users\username\asd-projects\semester-work-cartesian-tree

# создание папки для файлов сборки (чтобы не засорять папку с проектом) 
mkdir -p build && cd build 

# сборка проекта
cmake .. -DCMAKE_BUILD_TYPE=RelWithDebInfo && cmake --config RelWithDebInfo --build . 
```

#### Генерация тестовых данных

_Тестовые данные хранятся в виде [.csv файлов](https://en.wikipedia.org/wiki/Comma-separated_values):_



```shell
# переход в папку генерации набора данных
cd dataset
```

- `--samples` - количество генерируемых элементов;
- `<output>` - выходной файл и т.д.

Тестовые данные представлены в CSV формате (см.
[`dataset/data/dataset-example.csv`](dataset/data/dataset-example.csv)):

```csv
946454	106098	40486	63289	916488	831323	541594	559466	428651	777783
...
```

**Расположение файлов в папке data:**

```shell
dataset/data/
  split/
        /pack1
            01.csv
              ...
            12.csv
        /pack2
        ......
        /pack10
  search/
       /pack1
            01.csv
              ...
            12.csv
        /pack2
        ......
        /pack10
  ...
```

По названию директории `/dataset/data/split` можно понять, что здесь хранятся наборы данных для контрольных тестов по
**разделению дерева по вершине**. Папки **pack1 ....pack10-10** различных наборов данных, к которых находятся 12 .csv файлов, содержащие в себе случайны набор чисел **01.csv-100 элементов, 12.csv-5 000 000 элементов**. 

#### Контрольные тесты (benchmarks)

При тестировании измерялось только **время** выполнения на 12 наборах данных   (100,500,1 000,5 000, 10 000, 25 000, 50 000,100 000, 500 000, 1 000 000, 2 500 000, 5 000 000 чисел).

**Для запуска контрольных тестов необходимо предварительно сгенерировать или скачать готовый набор тестовых данных.**

Наборы данных должны находиться в папке семестровой работы на [Google Drive](https://drive.google.com/drive/folders/1TSjdTTbDApgpEV-YHxOiE-YiCl7uDN7s?usp=sharing). (Вес файла-  3ГБ)

##### Список контрольных тестов

| Название                  | Описание                                | Метрики         |
| :---                      | ---                                     | :---            |
| `SPLIT`                   | Разделение дерева по вершине            | _время_         |
| `MERGE`                   | Слияние двух деревьев                   | _время_         |
| `ERASE`                   | Удаление вершины из дерева              | _время_         |
| `INSERT`                  | Добавление вершины в дерево             | _время_         |
| `SEARCH`                  | Поиск вершины в дереве                  | _время_         |

##### Примеры запуска

```shell
./benchmark <input> <output> --trials 50
```

- `<input>` - входной файл с набором данных в формате CSV;
- `<output>` - выходной файл с результатами контрольного теста;
- `--trials` - количество прогонов на наборе данных и т.д.

Добавление 10000 случайных элементов в структуру данных (повторить операцию 50 раз и вычислить среднее время работы и
потребляемую память):

```
./add_benchmark.exe ../dataset/data/add/10000.csv metrics.txt --trials 50
``` 

где `<input> = ../dataset/data/add/10000.csv` и `<output> = metrics.txt`.

**Примечание**. Файл с метриками не обязателен, можете выводить данные в стандартный поток вывода (т.е. консоль).

## Источники

_Список использованных при реализации структуры данных источников._

*[https://habr.com/ru](https://habr.com/ru/post/101818/)(реализация декартового дерева на языке java)*

*[https://neerc.ifmo.ru](https://neerc.ifmo.ru/wiki/index.php?title=Декартово_дерево) (вики-статья)*

*[https://www.youtube.com](https://www.youtube.com/watch?v=68mMGJl5F8s&t=728s&ab_channel=%D0%9E%D0%BB%D0%B8%D0%BC%D0%BF%D0%B8%D0%B0%D0%B4%D0%BD%D0%BE%D0%B5%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%B2%D0%A3%D0%BB%D0%93%D0%A2%D0%A3)(понятное объяснение принципа работы декартового дерева)*

*[http://opentrains.mipt.ru](http://opentrains.mipt.ru/zksh/files/zksh2015/lectures/zksh_cartesian.pdf)* 

_**Это не плагиат, это уважение чужого труда и помощь своим сокурсникам более подробно разобраться в теме.**_
